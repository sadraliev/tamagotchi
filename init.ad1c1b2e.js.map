{"version":3,"sources":["ui.js","constants.js","game-state.js","buttons.js","init.js"],"names":["modFox","exports","state","document","querySelector","className","concat","modScene","togglePoopBag","show","classList","toggle","writeModal","text","arguments","length","undefined","innerHTML","TICK_RATE","ICONS","SCENES","RAIN_CHANCE","DAY_LENGTH","NIGHT_LENGTH","getNextHungerTime","clock","Math","floor","random","getNextDieTime","getNextPoopTime","_ui","require","_constants","gameState","current","wakeTime","sleepTime","hungryTime","dieTime","timeToStartCelebrating","timeToEndCelebrating","poopTime","tick","console","log","wake","sleep","getHungry","die","startCelebrating","endCelebrating","poop","startGame","scene","determineFoxState","clearTimes","cleanUpPoop","handleUserAction","icon","includes","changeWeather","feed","bind","_default","default","toggleHighlighted","initButtons","selectedIcon","addEventListener","event","target","contains","_gameState","_interopRequireWildcard","_buttons","_interopRequireDefault","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_typeof","o","Symbol","iterator","constructor","prototype","_regeneratorRuntime","value","c","asyncIterator","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","name","mark","setPrototypeOf","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","_catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","apply","_next","_throw","init","_init","_callee","nextTimeToTick","nextAnimationFrame","_callee$","_context","_nextAnimationFrame","now","Date","game","requestAnimationFrame"],"mappings":"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","file":"init.ad1c1b2e.js","sourceRoot":"../src","sourcesContent":["export const modFox = function modFox(state) {\n  document.querySelector(\".fox\").className = `fox fox-${state}`;\n};\nexport const modScene = function modScene(state) {\n  document.querySelector(\".game\").className = `game ${state}`;\n};\nexport const togglePoopBag = function togglePoopBag(show) {\n  document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n};\nexport const writeModal = function writeModal(text = \"\") {\n  document.querySelector(\".modal\").innerHTML =\n    `<div class=\"modal-inner\">${text}</div>`;\n};\n","export const TICK_RATE = 2000;\nexport const ICONS = [\"fish\", \"poop\", \"weather\"];\nexport const SCENES = [\"day\", \"rain\"];\nexport const RAIN_CHANCE = 0.2;\nexport const DAY_LENGTH = 20;\nexport const NIGHT_LENGTH = 3;\n\nexport const getNextHungerTime = (clock) =>\n  Math.floor(Math.random() * 3) + 5 + clock;\n\nexport const getNextDieTime = (clock) =>\n  Math.floor(Math.random() * 2) + 3 + clock;\n\nexport const getNextPoopTime = (clock) =>\n  Math.floor(Math.random() * 3) + 4 + clock;\n","import { modFox, modScene, togglePoopBag, writeModal } from \"./ui\";\nimport {\n  DAY_LENGTH,\n  getNextDieTime,\n  getNextHungerTime,\n  NIGHT_LENGTH,\n  RAIN_CHANCE,\n  SCENES,\n  getNextPoopTime,\n} from \"./constants\";\n\nconst gameState = {\n  current: \"INIT\",\n  clock: 1,\n  wakeTime: -1,\n  sleepTime: -1,\n  hungryTime: -1,\n  dieTime: -1,\n  timeToStartCelebrating: -1,\n  timeToEndCelebrating: -1,\n  poopTime: -1,\n\n  tick() {\n    this.clock++;\n    console.log(\"clock\", this.clock);\n\n    if (this.clock === this.wakeTime) {\n      this.wake();\n    } else if (this.clock === this.sleepTime) {\n      this.sleep();\n    } else if (this.clock === this.hungryTime) {\n      this.getHungry();\n    } else if (this.clock === this.dieTime) {\n      this.die();\n    } else if (this.clock === this.timeToStartCelebrating) {\n      this.startCelebrating();\n    } else if (this.clock === this.timeToEndCelebrating) {\n      this.endCelebrating();\n    } else if (this.clock === this.poopTime) {\n      this.poop();\n    }\n\n    return this.clock;\n  },\n\n  startGame() {\n    console.log(\"hatching\");\n    this.current = \"HATCHING\";\n    this.wakeTime = this.clock + 3;\n    modFox(\"egg\");\n    modScene(\"day\");\n    writeModal();\n  },\n\n  wake() {\n    console.log(\"awoken\");\n    this.current = \"IDLING\";\n    this.wakeTime = -1;\n    this.scene = Math.random() > RAIN_CHANCE ? 0 : 1;\n    modScene(SCENES[this.scene]);\n    this.sleepTime = this.clock + DAY_LENGTH;\n    this.hungryTime = getNextHungerTime(this.clock);\n    this.determineFoxState();\n  },\n\n  sleep() {\n    this.state = \"SLEEP\";\n    modFox(\"sleep\");\n    modScene(\"night\");\n    this.clearTimes();\n    this.wakeTime = this.clock + NIGHT_LENGTH;\n  },\n\n  getHungry() {\n    this.current = \"HUNGRY\";\n    this.dieTime = getNextDieTime(this.clock);\n    this.hungryTime = -1;\n    modFox(\"hungry\");\n  },\n\n  die() {\n    this.current = \"DEAD\";\n    modScene(\"dead\");\n    modFox(\"dead\");\n    this.cleanUpPoop();\n    writeModal(\"The fox died :( <br/> Press the middle button to start\");\n  },\n\n  startCelebrating() {\n    this.current = \"CELEBRATING\";\n    modFox(\"celebrate\");\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = this.clock + 2;\n  },\n\n  endCelebrating() {\n    this.timeToEndCelebrating = -1;\n    this.current = \"IDLING\";\n    this.determineFoxState();\n    togglePoopBag(false);\n  },\n\n  determineFoxState() {\n    if (this.current === \"IDLING\") {\n      if (SCENES[this.scene] === \"rain\") {\n        modFox(\"rain\");\n      } else {\n        modFox(\"idling\");\n      }\n    }\n  },\n\n  handleUserAction(icon) {\n    if (\n      [\"SLEEP\", \"FEEDING\", \"CELEBRATING\", \"HATCHING\"].includes(this.current)\n    ) {\n      return;\n    }\n\n    if (this.current === \"INIT\" || this.current === \"DEAD\") {\n      this.startGame();\n      return;\n    }\n\n    switch (icon) {\n      case \"weather\":\n        this.changeWeather();\n        break;\n      case \"poop\":\n        this.cleanUpPoop();\n        break;\n      case \"fish\":\n        this.feed();\n        break;\n    }\n  },\n\n  changeWeather() {\n    console.log(\"changeWeather\");\n    this.scene = (1 + this.scene) % SCENES.length;\n    modScene(SCENES[this.scene]);\n    this.determineFoxState();\n  },\n\n  feed() {\n    console.log(\"feed\");\n\n    if (this.current !== \"HUNGRY\") {\n      return;\n    }\n\n    this.current = \"FEEDING\";\n    this.dieTime = -1;\n    this.poopTime = getNextPoopTime(this.clock);\n    modFox(\"eating\");\n    this.timeToStartCelebrating = this.clock + 2;\n  },\n\n  poop() {\n    this.current = \"POOPING\";\n    this.poopTime = -1;\n    this.dieTime = getNextDieTime(this.clock);\n    modFox(\"pooping\");\n  },\n\n  cleanUpPoop() {\n    if (this.current === \"POOPING\") {\n      this.dieTime = -1;\n      togglePoopBag(true);\n      this.startCelebrating();\n      this.hungryTime = getNextHungerTime(this.clock);\n    }\n  },\n\n  clearTimes() {\n    this.wakeTime = -1;\n    this.sleepTime = -1;\n    this.hungryTime = -1;\n    this.dieTime = -1;\n    this.poopTime = -1;\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = -1;\n  },\n};\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\nexport default gameState;\n","import { ICONS } from \"./constants\";\n\nconst toggleHighlighted = (icon, show) => {\n  document\n    .querySelector(`.${ICONS[icon]}-icon`)\n    .classList.toggle(\"highlighted\", show);\n};\n\nexport default function initButtons(handleUserAction) {\n  let selectedIcon = 0;\n  function buttonClick(event) {\n    if (event.target.classList.contains(\"left-btn\")) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (2 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    } else if (event.target.classList.contains(\"right-btn\")) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (1 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    } else {\n      handleUserAction(ICONS[selectedIcon]);\n    }\n  }\n\n  document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n","import game, { handleUserAction } from \"./game-state\";\nimport { TICK_RATE } from \"./constants\";\nimport initButtons from \"./buttons\";\n\nasync function init() {\n  console.log(\"starting game\");\n\n  initButtons(handleUserAction);\n  let nextTimeToTick = Date.now();\n\n  function nextAnimationFrame() {\n    const now = Date.now();\n\n    if (nextTimeToTick <= now) {\n      game.tick();\n      nextTimeToTick = now + TICK_RATE;\n    }\n\n    requestAnimationFrame(nextAnimationFrame);\n  }\n\n  requestAnimationFrame(nextAnimationFrame);\n}\n\ninit();\n"]}